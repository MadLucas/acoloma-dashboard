const admin = require("firebase-admin");
const serviceAccount = require("../scripts/serviceAccountKey.json");


admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
});

const db = admin.firestore();

// Lista de precios SL_38 que generamos antes (resumido por espacio)
const sl38Precios = {
    "100": {
      "ancho": {
        "100": 24098,
        "110": 25930,
        "120": 27762,
        "130": 29593,
        "140": 31426,
        "150": 33258,
        "160": 35809,
        "170": 36921,
        "180": 38756,
        "190": 40588,
        "200": 42418,
        "210": 44252,
        "220": 46082,
        "230": 47916
      }
    },
    "120": {
      "ancho": {
        "100": 26444,
        "110": 28504,
        "120": 30564,
        "130": 32626,
        "140": 34685,
        "150": 36748,
        "160": 38807,
        "170": 40869,
        "180": 42927,
        "190": 44988,
        "200": 47049,
        "210": 49111,
        "220": 51169,
        "230": 53232
      }
    },
    "140": {
      "ancho": {
        "100": 28791,
        "110": 31079,
        "120": 33369,
        "130": 35655,
        "140": 37947,
        "150": 40234,
        "160": 42525,
        "170": 44814,
        "180": 47101,
        "190": 49393,
        "200": 51680,
        "210": 53967,
        "220": 56260,
        "230": 58545
      }
    },
    "160": {
      "ancho": {
        "100": 31135,
        "110": 33653,
        "120": 36170,
        "130": 38686,
        "140": 41207,
        "150": 43722,
        "160": 46241,
        "170": 48759,
        "180": 51274,
        "190": 53795,
        "200": 56309,
        "210": 58828,
        "220": 61345,
        "230": 63861
      }
    },
    "180": {
      "ancho": {
        "100": 33482,
        "110": 36228,
        "120": 38973,
        "130": 41719,
        "140": 44466,
        "150": 47210,
        "160": 49958,
        "170": 52700,
        "180": 55450,
        "190": 58192,
        "200": 60937,
        "210": 63685,
        "220": 66432,
        "230": 69176
      }
    },
    "200": {
      "ancho": {
        "100": 35827,
        "110": 38804,
        "120": 41778,
        "130": 44750,
        "140": 47723,
        "150": 50700,
        "160": 53671,
        "170": 56646,
        "180": 59622,
        "190": 62592,
        "200": 65570,
        "210": 68546,
        "220": 71517,
        "230": 74495
      }
    },
    "220": {
      "ancho": {
        "100": 38174,
        "110": 41377,
        "120": 44578,
        "130": 47783,
        "140": 50982,
        "150": 54184,
        "160": 57391,
        "170": 60594,
        "180": 63795,
        "190": 67001,
        "200": 70202,
        "210": 73405,
        "220": 76604,
        "230": 79804
      }
    },
    "240": {
      "ancho": {
        "100": 40521,
        "110": 43951,
        "120": 47381,
        "130": 50813,
        "140": 54244,
        "150": 57678,
        "160": 61108,
        "170": 64539,
        "180": 67970,
        "190": 71401,
        "200": 74831,
        "210": 78264,
        "220": 81696,
        "230": 85121
      }
    },
    "260": {
      "ancho": {
        "100": 42868,
        "110": 46527,
        "120": 50184,
        "130": 53843,
        "140": 57506,
        "150": 61165,
        "160": 64823,
        "170": 68485,
        "180": 72143,
        "190": 75804,
        "200": 79457,
        "210": 83115,
        "220": 86774,
        "230": 90439
      }
    },
    "280": {
      "ancho": {
        "100": 45213,
        "110": 49103,
        "120": 52986,
        "130": 56877,
        "140": 60766,
        "150": 64653,
        "160": 68535,
        "170": 72425,
        "180": 76313,
        "190": 80199,
        "200": 84087,
        "210": 87974,
        "220": 91864,
        "230": 95749
      }
    },
    "300": {
      "ancho": {
        "100": 47557,
        "110": 51678,
        "120": 55792,
        "130": 59908,
        "140": 64025,
        "150": 68137,
        "160": 72256,
        "170": 76368,
        "180": 80491,
        "190": 84603,
        "200": 88722,
        "210": 92840,
        "220": 96952,
        "230": 101073
      }
    },
    "320": {
      "ancho": {
        "100": 49904,
        "110": 54248,
        "120": 58593,
        "130": 62936,
        "140": 67286,
        "150": 71625,
        "160": 75976,
        "170": 80313,
        "180": 84665,
        "190": 89007,
        "200": 93346,
        "210": 97699,
        "220": 102034,
        "230": 106381
      }
    },
    "340": {
      "ancho": {
        "100": 52252,
        "110": 56824,
        "120": 61395,
        "130": 65971,
        "140": 70540,
        "150": 75119,
        "160": 79687,
        "170": 84261,
        "180": 88833,
        "190": 93407,
        "200": 97981,
        "210": 102558,
        "220": 107119,
        "230": 111693
      }
    },
    "360": {
      "ancho": {
        "100": 54594,
        "110": 59397,
        "120": 64198,
        "130": 69000,
        "140": 73800,
        "150": 78605,
        "160": 83400,
        "170": 88205,
        "180": 93008,
        "190": 97806,
        "200": 102604,
        "210": 107407,
        "220": 112208,
        "230": 117011
      }
    },
    "380": {
      "ancho": {
        "100": 56943,
        "110": 61975,
        "120": 67001,
        "130": 72034,
        "140": 77058,
        "150": 82090,
        "160": 87125,
        "170": 92151,
        "180": 97178,
        "190": 102213,
        "200": 107237,
        "210": 112269,
        "220": 117299,
        "230": 122332
      }
    },
    "400": {
      "ancho": {
        "100": 59292,
        "110": 64548,
        "120": 69802,
        "130": 75067,
        "140": 80317,
        "150": 85579,
        "160": 90835,
        "170": 96096,
        "180": 101360,
        "190": 106608,
        "200": 111873,
        "210": 117134,
        "220": 122379,
        "230": 127644
      }
    }
  }
    

async function subirLista(nombre, data) {
  try {
    await db.collection("listaDePrecios").doc(nombre).set({
      tabla: data,
      creadoEn: new Date()
    });
    console.log(`✅ Lista "${nombre}" subida exitosamente`);
  } catch (err) {
    console.error("❌ Error al subir lista:", err);
  }
}

// Ejecutar
subirLista("sl_38costo", sl38Precios);